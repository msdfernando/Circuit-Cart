<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Circuit Cart Dashboard</title>
  <link rel="stylesheet" href="styles/styles.css">
</head>
<body>
  <!-- Member Selection Landing Page -->
  <div id="member-selection">
    <header>
      <img src="assets/logo.png" alt="Logo" class="logo">
      <h1>Welcome to Circuit Cart</h1>
    </header>

    <main class="selection-main">
      <div class="selection-container">
        <h2>Choose Your Shopping Experience</h2>
        <div class="selection-buttons">
          <button type="button" id="member-btn" class="selection-btn member-btn">
            <div class="btn-icon">üë§</div>
            <h3>Circuit Cart Member</h3>
            <p>Scan your QR code to use wallet points</p>
          </button>
          <button type="button" id="guest-btn" class="selection-btn guest-btn">
            <div class="btn-icon">üõí</div>
            <h3>Not a Circuit Cart Member</h3>
            <p>Continue as guest with regular payment</p>
          </button>
        </div>
      </div>
    </main>

    <footer>
      <p>Powered by Circuit Cart</p>
    </footer>
  </div>

  <!-- QR Scanner Page -->
  <div id="qr-scanner" class="hidden">
    <header>
      <img src="assets/logo.png" alt="Logo" class="logo">
      <h1>Scan Your QR Code</h1>
    </header>

    <main class="scanner-main">
      <div class="scanner-container">
        <div class="scanner-section">
          <div class="usb-scanner-container">
            <div class="scanner-icon">üì±</div>
            <h3>üîç Scan Customer QR Code</h3>
            <p><strong>Click in the field below and scan the QR code:</strong></p>
            <input type="text" id="scanner-input" class="scanner-input"
                   placeholder="üéØ CLICK HERE AND SCAN QR CODE"
                   autocomplete="off" spellcheck="false">
            <div class="scanner-button-container">
              <button type="button" id="clear-scanner" class="btn btn-secondary">Clear</button>
              <button type="button" id="focus-scanner" class="btn btn-primary">Focus Scanner</button>
            </div>
            <div id="scanner-status" class="scanner-status"></div>
          </div>
        </div>
        <div class="scanner-actions">
          <button type="button" id="back-to-selection" class="back-btn">‚Üê Back to Selection</button>
        </div>
      </div>
    </main>
  </div>

  <!-- Customer Info Display Page -->
  <div id="customer-info" class="hidden">
    <header>
      <img src="assets/logo.png" alt="Logo" class="logo">
      <h1>Welcome Back!</h1>
    </header>

    <main class="customer-main">
      <div class="customer-container">
        <div class="customer-card">
          <div class="customer-photo">
            <img id="customer-photo" src="" alt="Customer Photo">
          </div>
          <div class="customer-details">
            <h2 id="customer-name">Customer Name</h2>
            <div class="wallet-info">
              <span class="wallet-label">Wallet Balance:</span>
              <span id="wallet-balance" class="wallet-amount">$0.00</span>
            </div>
          </div>
        </div>
        <div class="customer-actions">
          <button type="button" id="continue-shopping" class="continue-btn">Continue Shopping</button>
          <button type="button" id="back-to-scanner" class="back-btn">‚Üê Scan Different QR</button>
        </div>
      </div>
    </main>
  </div>

  <!-- Main Dashboard -->
  <div id="dashboard" class="hidden">
    <header>
      <img src="assets/logo.png" alt="Logo" class="logo">
    </header>

    <main>
      <!-- Left Section: Camera Feed and Label Feed -->
      <div class="left-section">
        <div>
          <h2>Camera Feed</h2>
          <img id="camera-image" src="" alt="Camera Feed">
        </div>
        <div>
          <h2>Label Feed</h2>
          <div id="label-data">
            <p>Loading label data...</p>
          </div>
        </div>
      </div>

      <!-- Right Section: Cart List -->
      <div class="right-section">
        <h2>Cart List</h2>
        <div id="cart-list">
          <!-- Cart items will be dynamically added here -->
        </div>
        <div id="total-amount">
          <p>Total: $<span id="total-value">0.00</span></p>
        </div>
        <div class="buttons">
          <button type="button" id="pay-button">PAY</button>
          <button type="button" id="cancel-button">CANCEL</button>
        </div>
      </div>
    </main>

    <footer>
      <p>Powered by Circuit Cart</p>
    </footer>
  </div>

  <!-- Bill/Receipt Page -->
  <div id="bill-page" class="hidden">
    <header>
      <h1>Payment Successful!</h1>
      <button type="button" id="back-to-dashboard">Back to Home</button>
    </header>

    <main>
      <div class="bill-container">
        <!-- Left Side: Bill Details -->
        <div class="bill-details">
          <h2>Your Bill</h2>
          <div id="bill-items">
            <!-- Bill items will be dynamically added here -->
          </div>
          <div id="bill-total">
            <p>Total: $<span id="bill-total-value">0.00</span></p>
          </div>
        </div>

        <!-- Right Side: Print Button -->
        <div class="print-section">
          <button type="button" id="print-bill-btn" class="print-button">
            üñ®Ô∏è Print Bill
          </button>
        </div>
      </div>
    </main>
  </div>

  <script type="module">
    import {
      handlePayment,
      goBackToDashboard,
      printBill,
      clearCart
    } from './scripts/main.js';

    import {
      initializeNavigation
    } from './scripts/navigation.js';

    // Initialize navigation when DOM is loaded
    document.addEventListener('DOMContentLoaded', () => {
      initializeNavigation();

      // Event listeners using imported functions
      document.getElementById('print-bill-btn').addEventListener('click', printBill);
      document.getElementById('back-to-dashboard').addEventListener('click', goBackToDashboard);
      document.getElementById('pay-button').addEventListener('click', handlePayment);
      document.getElementById('cancel-button').addEventListener('click', clearCart);
    });
  </script>
</body>
</html>